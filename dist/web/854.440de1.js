"use strict";(window.mor_modules=window.mor_modules||[]).push([[854],{no9y:function(C,_,e){e.d(_,{Sj:function(){return d},cq:function(){return f},gM:function(){return g}});var l=e("/cI1"),o=e("UtkT").ik;function g(m){var y="[zy]registerService";return console.log(y,"service start",m),(0,l.z2)(m).then(function(u){if(console.log(y,"resp=",u),u!=null&&u.success)return!0;u!=null&&u.errorMessage?o.showToast({title:u==null?void 0:u.errorMessage}):o.showToast({title:"\u6CE8\u518C\u5931\u8D25"})})}function f(m){var y="[zy]trialService";return console.log(y,"service start",m),(0,l.FD)(m).then(function(u){if(console.log(y,"resp=",u),u)return u})}function d(m){var y="[zy]getPhoneService";return console.log(y,"service start",m),(0,l.Dj)(m).then(function(u){return u==null?void 0:u.mobile})}},YBZf:function(C,_,e){e.d(_,{L:function(){return o}});var l=function(){var f=getCurrentPages(),d=f[f.length-1],m=d.route;return m},o=function(){var f=getCurrentPages(),d=f[f.length-1],m=d.options;return m}},FAOa:function(C,_,e){e.r(_),e.d(_,{$templates:function(){return z},defaultRender:function(){return O},isComplexComponents:function(){return Q}});var l=e("mXGw"),o=e("20uZ"),g=e("BYLK"),f=e("aMrw"),d=e("CWDa"),m=e("3lLI"),y=e("uvno"),u=e("FyQJ"),B=e("eMCs"),b=e.n(B),h=e("vRpg"),U=e.n(h),S=e("rRSO"),A=e.n(S),V=e("v1RS"),W=e.n(V),I=e("Me5i"),N=e.n(I),F=e("54ue"),k=e.n(F),R=e("SDTC"),x={};x.styleTagTransform=k(),x.setAttributes=W(),x.insert=A().bind(null,"head"),x.domAPI=U(),x.insertStyleElement=N();var H=b()(R.Z,x),J=R.Z&&R.Z.locals?R.Z.locals:void 0,z={};function O(i){var X=i.$id,E=i.formData,G=i.unitShowText,r=i.unitVisible,t=i.unitValue,n=i.unitTitle,a=i.units,s=i.airportVisible,c=i.airportValue,v=i.citys,T=i.airportTitle,p=i.mykeys,D=i.airlineVisible,P=i.airlineValue,Z=i.airlineTitle,M=i.airlines,K=i.otherVisible,j=i.stepDisabled;return l.createElement("tiga-page",null,l.createElement("tiga-view",{class:"container"},l.createElement("tiga-view",{class:"main-title"+(" 157f16c33b1342788eb50093cd6b132e"+(typeof index!="undefined"?index:"")+(" comp-id-"+X))},"\u4F01\u4E1A\u90AE\u7BB1\u8BA4\u8BC1",o.Z.registEvents([{name:"tap",event:"test",catch:!1}],i,"157f16c33b1342788eb50093cd6b132e"+(typeof index!="undefined"?index:""))),l.createElement("tiga-view",{class:"code-box"},l.createElement(g.Z,{"data-prop":"name",value:E==null?void 0:E.name,placeholder:"\u771F\u5B9E\u59D3\u540D",clearable:!0,ref:o.Z.ref("$morSaveRef",i),morTagName:"t-input",onClear:o.Z.getEvent("inputChangeNormal",i),onChange:o.Z.getEvent("inputChangeNormal",i)}),l.createElement(d.Z,{title:"\u9009\u62E9\u5355\u4F4D",arrow:!0,hover:!0,note:G,ref:o.Z.ref("$morSaveRef",i),morTagName:"t-cell",onClick:o.Z.getEvent("onTitlePicker",i)}),l.createElement("t-picker",{visible:r,value:t,"data-key":"unit",title:n,cancelBtn:"\u53D6\u6D88",confirmBtn:"\u786E\u8BA4",onChange:o.Z.getEvent("onPickerChangeOfUnit",i),onPick:o.Z.getEvent("onColumnChange",i),onCancel:o.Z.getEvent("onPickerCancel",i)},l.createElement("t-picker-item",{options:a})),l.createElement(o.Z.Block,null,l.createElement(m.Z,{visible:s,value:c,options:v,title:T,"data-key":"airport",keys:p,ref:o.Z.ref("$morSaveRef",i),morTagName:"t-cascader",onChange:o.Z.getEvent("onChangeOfCascader",i),onPick:o.Z.getEvent("onPickOfCascader",i)}),l.createElement("t-picker",{visible:D,value:P,"data-key":"airline",title:Z,cancelBtn:"\u53D6\u6D88",confirmBtn:"\u786E\u8BA4",onChange:o.Z.getEvent("onPickerChangeOfAirline",i),onPick:o.Z.getEvent("onColumnChange",i),onCancel:o.Z.getEvent("onPickerCancel",i)},l.createElement("t-picker-item",{options:M})),K?l.createElement(o.Z.Block,null,l.createElement(g.Z,{"data-prop":"unit",value:E==null?void 0:E.unit,placeholder:"\u8BF7\u586B\u5199\u5DE5\u4F5C\u5355\u4F4D",clearable:!0,ref:o.Z.ref("$morSaveRef",i),morTagName:"t-input",onClear:o.Z.getEvent("inputChangeNormal",i),onChange:o.Z.getEvent("inputChangeNormal",i)})):!1),l.createElement(g.Z,{"data-prop":"depart",value:E==null?void 0:E.depart,placeholder:"\u8BF7\u586B\u5199\u6240\u5728\u90E8\u95E8",clearable:!0,ref:o.Z.ref("$morSaveRef",i),morTagName:"t-input",onClear:o.Z.getEvent("inputChangeNormal",i),onChange:o.Z.getEvent("inputChangeNormal",i)}),l.createElement(g.Z,{"data-prop":"mail",value:E==null?void 0:E.mail,placeholder:"\u90AE\u7BB1\u5730\u5740",clearable:!0,ref:o.Z.ref("$morSaveRef",i),morTagName:"t-input",onClear:o.Z.getEvent("inputChangeNormal",i),onChange:o.Z.getEvent("inputChangeNormal",i)})),l.createElement("tiga-view",{class:"login-button-area"},l.createElement(y.Z,{theme:"primary",size:"large",block:!0,disabled:j,ref:o.Z.ref("$morSaveRef",i),morTagName:"t-button",onTap:o.Z.getEvent("submit",i)},"\u63D0\u4EA4\u8BA4\u8BC1\u7533\u8BF7"))))}var Q=!0},MTso:function(C,_,e){e.r(_),e.d(_,{default:function(){return G}});var l=e("6Ydh"),o=e("DajF"),g=e("MM43"),f=e("4kMG"),d=e("8mQb"),m=e("bmIf"),y=e("tTth"),u=e("8j+p"),B=e("mXGw"),b=e("kGfE"),h=e("kvBl"),U=e("20uZ"),S=e("2GZr"),A=e("YBZf"),V=e("gmp5"),W=e("no9y"),I=e("IzCe"),N=e("ueW0"),F=I.nw+"/api/searchArea";function k(r){var t="[zy]searchArea model",n=F;return console.log(t,"request start",n),(0,N.W)({url:n,data:r,method:"POST"}).then(function(a){return console.log(t,"request success",a),a}).catch(function(a){console.log(t,"request fail",a)})}function R(r){var t="[zy]searchAreaService";return console.log(t,"service start",r),k(r).then(function(n){if(n!=null&&n.data)return n.data})}var x=I.nw+"/api/findAirlines";function H(r){var t="[zy]findAirlines model",n=x;return console.log(t,"request start",n),(0,N.W)({url:n,data:r,method:"POST"}).then(function(a){return console.log(t,"request success",a),a}).catch(function(a){console.log(t,"request fail",a)})}function J(r){var t="[zy]findAirlinesService";return console.log(t,"service start",r),H(r).then(function(n){if(console.log(t,"service got",n),n.data)return n.data.map(function(a){return{label:a.airlinesName,value:a.airlinesCode}})})}var z=e("yF2H").D4,O=e("UtkT").ik,Q=e("FAOa");z({data:{mykeys:{label:"areaName",value:"areaCode"},account:"",formData:{},stepDisabled:!0,unitShowText:"",unitTitle:"",unitText:"",unitValue:[],airportText:"",airportValue:[],airportTitle:"",airlineText:"",airlineValue:[],airlineTitle:"",units:[{label:"\u673A\u573A",value:"1",key:"airport"},{label:"\u822A\u53F8",value:"2",key:"airline"},{label:"\u5176\u4ED6",value:"3",key:"other"}],citys:[{label:"\u5317\u4EAC\u5E02",value:"\u5317\u4EAC\u5E02"},{label:"\u4E0A\u6D77\u5E02",value:"\u4E0A\u6D77\u5E02"},{label:"\u5E7F\u5DDE\u5E02",value:"\u5E7F\u5DDE\u5E02"},{label:"\u6DF1\u5733\u5E02",value:"\u6DF1\u5733\u5E02"},{label:"\u6210\u90FD\u5E02",value:"\u6210\u90FD\u5E02"}],airlines:[]},onLoad:function(t){var n=(0,A.L)()||{},a=n.account,s=n.operate;console.log("[zy]got from last page:account",a,s),this.setData({account:a,operate:s});var c=this.checkBase();this.searchArea(),this.findAirlines()},searchArea:function(){var t=this;R({head:{uid:"",token:"",requestTime:"2024-04-07T02:18:21.282Z",appId:"",clientType:"1",clientVersion:"",moduleCode:"common",chartTableCode:null},type:1}).then(function(n){(n==null?void 0:n.length)>0&&t.setData({citys:n})})},findAirlines:function(){var t=this;J({head:{uid:"",token:"",requestTime:"2024-04-07T02:18:25.687Z",appId:"",clientType:"1",clientVersion:"",moduleCode:"common",chartTableCode:null},type:1}).then(function(n){(n==null?void 0:n.length)>0&&t.setData({airlines:n})})},onPickOfCascader:function(t){var n="[zy]onPickOfCascader";console.log(n,t.detail)},onChangeOfCascader:function(t){var n,a="[zy]onChangeOfCascader",s=t.detail,c=s.selectedOptions,v=s.value,T=this.data.unitText,p=(n=c[(c==null?void 0:c.length)-1])===null||n===void 0?void 0:n.areaName;console.log(a,t.detail),this.setData({airportValue:[v],airportText:p,airportVisible:!1,unitShowText:"".concat(T,":").concat(p)})},inputChange:function(t){var n=t.currentTarget.dataset.prop,a=t.detail.value;this.setData({stepDisabled:!a}),this.data.formData[n]=a,this.setData({formData:this.data.formData})},onColumnChange:function(t){console.log("picker pick:",t)},onPickerChangeOfAirline:function(t){var n=t.currentTarget.dataset.key,a=t.detail,s=a.label,c=a.value,v=this.data.unitText,T=s.join(" ");console.log("picker change:",t.detail),this.setData((0,h.Z)((0,h.Z)((0,h.Z)((0,h.Z)({},"".concat(n,"Visible"),!1),"".concat(n,"Value"),c),"".concat(n,"Text"),s.join(" ")),"unitShowText","".concat(v,":").concat(T)))},onPickerChangeOfUnit:function(t){var n=t.currentTarget.dataset.key,a=t.detail,s=a.label,c=a.value,v=this.data.units.map(function(M){return M.key}),T=this.data.units.map(function(M){return M.label}),p=c[0]-1,D=v[p],P=T[p];console.log("picker change:",D,t.detail);var Z=s.join(" ");this.setData((0,h.Z)((0,h.Z)((0,h.Z)((0,h.Z)((0,h.Z)((0,h.Z)({},"".concat(n,"Visible"),!1),"".concat(n,"Value"),c),"".concat(n,"Text"),Z),"".concat(D,"Visible"),!0),"".concat(D,"Title"),"\u9009\u62E9"+P),"unitShowText",Z))},onPickerCancel:function(t){var n=t.currentTarget.dataset.key;console.log(t,"\u53D6\u6D88"),console.log("picker1 cancel:"),this.setData((0,h.Z)({},"".concat(n,"Visible"),!1))},onTitlePicker:function(){this.setData({unitVisible:!0,unitTitle:"\u9009\u62E9\u5355\u4F4D"})},inputChange2:function(t){var n=t.currentTarget.dataset.prop,a=t.detail.value;this.data.formData[n]=a,this.setData({formData:this.data.formData})},inputChangeNormal:function(t){var n=t.currentTarget.dataset.prop,a=t.detail.value;this.data.formData[n]=a,this.setData({formData:this.data.formData});var s=this.check();this.setData({stepDisabled:!s})},getMainUnit:function(){var t=this.data,n=t.unitValue,a=t.airportText,s=t.airportValue,c=t.airlineText,v=t.airlineValue,T=this.data.formData.unit,p="",D="",P=+n[0]||0;return P===1?(p=a,D=s[0]):P===2?(p=c,D=v[0]):p=T,{mainUnitName:p,mainUnitCode:D,demoType:P}},checkBase:function(){var t,n=this.data.account;if(!n){O.showToast({icon:"none",title:"\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A"});return}var a=getApp(),s=(t=a==null?void 0:a.globalData)===null||t===void 0?void 0:t.session,c=s.openid,v=s.unionid;if(!c){O.showToast({icon:"none",title:"\u9700\u8981\u5148\u767B\u5F55\u5C0F\u7A0B\u5E8F"}),(0,V.oF)();return}return!0},check:function(t){var n=this.data.formData,a=n.name,s=n.depart,c=n.mail,v=this.getMainUnit(),T=v.mainUnitName,p=v.mainUnitCode;if(!a){t&&O.showToast({icon:"none",title:"\u771F\u5B9E\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A"});return}if(!s){t&&O.showToast({icon:"none",title:"\u90E8\u95E8\u4E0D\u80FD\u4E3A\u7A7A"});return}if(!c){t&&O.showToast({icon:"none",title:"\u90AE\u7BB1\u4E0D\u80FD\u4E3A\u7A7A"});return}if(!T){t&&O.showToast({icon:"none",title:"\u5355\u4F4D\u4E0D\u80FD\u4E3A\u7A7A"});return}return!0},submit:function(t){var n;return(0,S.__awaiter)(this,void 0,void 0,(0,b.Z)().mark(function a(){var s,c,v,T,p,D,P,Z,M,K,j,Y,w,$;return(0,b.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(s=this.check(!0),s){L.next=3;break}return L.abrupt("return");case 3:c=this.data.account,v=this.data.formData,T=v.name,p=v.depart,D=v.mail,P=getApp(),Z=(n=P==null?void 0:P.globalData)===null||n===void 0?void 0:n.session,M=Z.openid,K=Z.unionid,j=this.getMainUnit(),Y=j.mainUnitName,w=j.mainUnitCode,$=j.demoType,(0,W.cq)({name:T,mobileprefix:I.vc.default_mobile_prefix,mobile:c,mail:D,mainUnitName:Y,mainUnitCode:w,remark:"",depart:p,title:"",budget:0,persons:0,demoType:$,openid:M,unionid:K}).then(function(q){q?O.navigateTo({url:"/pages/usercenter/register/finish/index"}):O.showToast({title:" \u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"})});case 9:case"end":return L.stop()}},a,this)}))},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}},"w");var i=U.Z.Page(Q,U.Z.mergeConfig(e("v9Xe"),e("QkHD")));function X(r,t,n){return t=(0,d.Z)(t),(0,g.Z)(r,(0,f.Z)()?Reflect.construct(t,n||[],(0,d.Z)(r).constructor):t.apply(r,n))}var E=function(r){function t(){return(0,l.Z)(this,t),X(this,t,arguments)}return(0,m.Z)(t,r),(0,o.Z)(t,[{key:"render",value:function(){return B.createElement("tiga-page-host",{"show-back":"false","show-header":"true"},B.createElement(i,null))}}])}(B.Component),G=E},UFQt:function(C,_,e){var l=e("Ba9y"),o=e.n(l),g=e("Ai0b"),f=e.n(g),d=f()(o());d.push([C.id,`.container {
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  padding: 6.25rem 0;
  box-sizing: border-box;
}

.container2 {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  box-sizing: border-box;
}`,""]),_.Z=d},SDTC:function(C,_,e){var l=e("Ba9y"),o=e.n(l),g=e("Ai0b"),f=e.n(g),d=f()(o());d.push([C.id,`tiga-page {
  width: 100%;
  height: 100%;
  overflow: hidden;
  background-image: linear-gradient(180deg, white, lightblue);
}

.container {
  padding-top: 2.1875rem;
  padding-left: 1.25rem;
  padding-right: 1.25rem;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
}
.container .main-title {
  font-size: 1.5625rem;
  color: #2F343E;
  text-align: center;
  font-weight: bold;
  margin-bottom: 0.375rem;
}
.container .code-box {
  margin-top: 1.96875rem;
  width: 100%;
}
.container .login-button-area {
  width: 100%;
  height: 100%;
  align-self: flex-end;
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
}
.container .mb-16 {
  margin-bottom: 1rem;
}`,""]),_.Z=d},FyQJ:function(C,_,e){var l=e("eMCs"),o=e.n(l),g=e("vRpg"),f=e.n(g),d=e("rRSO"),m=e.n(d),y=e("v1RS"),u=e.n(y),B=e("Me5i"),b=e.n(B),h=e("54ue"),U=e.n(h),S=e("UFQt"),A={};A.styleTagTransform=U(),A.setAttributes=u(),A.insert=m().bind(null,"head"),A.domAPI=f(),A.insertStyleElement=b();var V=o()(S.Z,A),W=S.Z&&S.Z.locals?S.Z.locals:void 0},v9Xe:function(C){C.exports=JSON.parse('{"pages":["pages/usercenter/login/account/index","pages/line/index","pages/usercenter/code/index","pages/usercenter/login/pass/index","pages/usercenter/reset/account/index","pages/usercenter/reset/reset/index","pages/usercenter/register/account/index","pages/usercenter/register/pass/index","pages/usercenter/register/mail/index","pages/usercenter/register/finish/index","pages/logs/logs","pages/index/index"],"usingComponents":{"navigation-bar":"/components/navigation-bar/navigation-bar","ec-canvas":"/ec-canvas/ec-canvas","t-icon":"tdesign-miniprogram/icon/icon","t-loading":"tdesign-miniprogram/loading/loading","t-popup":"tdesign-miniprogram/popup/popup","t-cell-group":"tdesign-miniprogram/cell-group/cell-group","t-cell":"tdesign-miniprogram/cell/cell","t-input":"tdesign-miniprogram/input/input","t-button":"tdesign-miniprogram/button/button","t-radio":"tdesign-miniprogram/radio/radio","t-link":"tdesign-miniprogram/link/link","t-cascader":"tdesign-miniprogram/cascader/cascader","t-toast":"tdesign-miniprogram/toast/toast"},"resolveAlias":{"config/*":"config/*","services/*":"services/*","model/*":"model/*","utils/*":"utils/*","components/*":"components/*","tdesign-miniprogram/*":"miniprogram_npm/tdesign-miniprogram/*"},"window":{"backgroundTextStyle":"light","titleBarColor":"#fff","defaultTitle":"Weixin"},"sitemapLocation":"sitemap.json"}')},QkHD:function(C){C.exports=JSON.parse('{"usingComponents":{}}')}}]);
