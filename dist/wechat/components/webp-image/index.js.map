{"version":3,"file":"components/webp-image/index.js","mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///./components/webp-image/index.js"],"sourcesContent":["\"use strict\";\nvar _a;\n/*\n * @Author: rileycai\n * @Date: 2022-03-14 14:21:26\n * @LastEditTime: 2022-03-14 15:23:04\n * @LastEditors: rileycai\n * @Description: webp-image组件对t-image包裹了一层，主要实现图片裁剪、webp压缩功能\n * @FilePath: /tdesign-miniprogram-starter/components/webp-image/index.js\n */\nvar systemInfo = (_a = wx.getSystemInfoSync) === null || _a === void 0 ? void 0 : _a.call(wx);\nComponent({\n    externalClasses: ['t-class', 't-class-load'],\n    properties: {\n        loadFailed: {\n            type: String,\n            value: 'default',\n        },\n        loading: {\n            type: String,\n            value: 'default',\n        },\n        src: {\n            type: String,\n            value: '',\n        },\n        mode: {\n            type: String,\n            value: 'aspectFill',\n        },\n        webp: {\n            type: Boolean,\n            value: true,\n        },\n        lazyLoad: {\n            type: Boolean,\n            value: false,\n        },\n        showMenuByLongpress: {\n            type: Boolean,\n            value: false,\n        },\n    },\n    data: {\n        thumbHeight: 375,\n        thumbWidth: 375,\n        systemInfo: systemInfo,\n    },\n    lifetimes: {\n        ready: function () {\n            var _this = this;\n            var mode = this.properties.mode;\n            // 获取容器的真实宽高，设置图片的裁剪宽度\n            this.getRect('.J-image').then(function (res) {\n                if (res) {\n                    var width = res.width, height = res.height;\n                    _this.setData(mode === 'heightFix'\n                        ? {\n                            thumbHeight: _this.px2rpx(height) || 375,\n                        }\n                        : {\n                            thumbWidth: _this.px2rpx(width) || 375,\n                        });\n                }\n            });\n        },\n    },\n    methods: {\n        px2rpx: function (px) {\n            return (750 / (systemInfo.screenWidth || 375)) * px;\n        },\n        getRect: function (selector) {\n            var _this = this;\n            return new Promise(function (resolve) {\n                if (!_this.selectorQuery) {\n                    _this.selectorQuery = _this.createSelectorQuery();\n                }\n                _this.selectorQuery.select(selector).boundingClientRect(resolve).exec();\n            });\n        },\n        onLoad: function (e) {\n            this.triggerEvent('load', e.detail);\n        },\n        onError: function (e) {\n            this.triggerEvent('error', e.detail);\n        },\n    },\n});\n"],"names":[],"sourceRoot":""}