{"version":3,"file":"pages/usercenter/index.js","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///./model/usercenter/usercenter.js","webpack:///./pages/usercenter/index.js","webpack:///./services/usercenter/fetchUsercenter.js"],"sourcesContent":["import { __assign } from \"tslib\";\nvar userInfo = {\n    avatarUrl: 'https://we-retail-static-1300977798.cos.ap-guangzhou.myqcloud.com/retail-ui/components-exp/avatar/avatar-1.jpg',\n    nickName: 'TDesign üåü',\n    phoneNumber: '13438358888',\n    gender: 2,\n};\nvar countsData = [\n    {\n        num: 2,\n        name: 'ÁßØÂàÜ',\n        type: 'point',\n    },\n    {\n        num: 10,\n        name: '‰ºòÊÉ†Âà∏',\n        type: 'coupon',\n    },\n];\nvar orderTagInfos = [\n    {\n        orderNum: 1,\n        tabType: 5,\n    },\n    {\n        orderNum: 1,\n        tabType: 10,\n    },\n    {\n        orderNum: 1,\n        tabType: 40,\n    },\n    {\n        orderNum: 0,\n        tabType: 0,\n    },\n];\nvar customerServiceInfo = {\n    servicePhone: '4006336868',\n    serviceTimeDuration: 'ÊØèÂë®‰∏âËá≥Âë®‰∫î 9:00-12:00  13:00-15:00',\n};\nexport var genSimpleUserInfo = function () { return (__assign({}, userInfo)); };\nexport var genUsercenter = function () { return ({\n    userInfo: userInfo,\n    countsData: countsData,\n    orderTagInfos: orderTagInfos,\n    customerServiceInfo: customerServiceInfo,\n}); };\n","import { __assign } from \"tslib\";\nimport { fetchUserCenter } from '../../services/usercenter/fetchUsercenter';\nimport Toast from 'tdesign-miniprogram/toast/index';\nimport { logoutService } from 'services/usercenter/logoutService';\nimport { getLocalAccountSession } from 'services/usercenter/loginService';\nvar menuData = [\n    [\n        {\n            title: 'Êî∂Ë¥ßÂú∞ÂùÄ',\n            tit: '',\n            url: '',\n            type: 'address',\n        },\n        {\n            title: '‰ºòÊÉ†Âà∏',\n            tit: '',\n            url: '',\n            type: 'coupon',\n        },\n        {\n            title: 'ÁßØÂàÜ',\n            tit: '',\n            url: '',\n            type: 'point',\n        },\n    ],\n    [\n        {\n            title: 'Â∏ÆÂä©‰∏≠ÂøÉ',\n            tit: '',\n            url: '',\n            type: 'help-center',\n        },\n        {\n            title: 'ÂÆ¢ÊúçÁÉ≠Á∫ø',\n            tit: '',\n            url: '',\n            type: 'service',\n            icon: 'service',\n        },\n    ],\n];\nvar orderTagInfos = [\n    {\n        title: 'ÂæÖ‰ªòÊ¨æ',\n        iconName: 'wallet',\n        orderNum: 0,\n        tabType: 5,\n        status: 1,\n    },\n    {\n        title: 'ÂæÖÂèëË¥ß',\n        iconName: 'deliver',\n        orderNum: 0,\n        tabType: 10,\n        status: 1,\n    },\n    {\n        title: 'ÂæÖÊî∂Ë¥ß',\n        iconName: 'package',\n        orderNum: 0,\n        tabType: 40,\n        status: 1,\n    },\n    {\n        title: 'ÂæÖËØÑ‰ª∑',\n        iconName: 'comment',\n        orderNum: 0,\n        tabType: 60,\n        status: 1,\n    },\n    {\n        title: 'ÈÄÄÊ¨æ/ÂîÆÂêé',\n        iconName: 'exchang',\n        orderNum: 0,\n        tabType: 0,\n        status: 1,\n    },\n];\nvar getDefaultData = function () { return ({\n    showMakePhone: false,\n    userInfo: {\n        avatarUrl: '',\n        nickName: 'Ê≠£Âú®ÁôªÂΩï...',\n        phoneNumber: '',\n    },\n    menuData: menuData,\n    orderTagInfos: orderTagInfos,\n    customerServiceInfo: {},\n    currAuthStep: 1,\n    showKefu: true,\n    versionNo: '',\n}); };\nPage({\n    data: getDefaultData(),\n    onLoad: function () {\n        this.getVersionInfo();\n    },\n    onShow: function () {\n        this.getTabBar().init();\n        this.init();\n    },\n    onPullDownRefresh: function () {\n        this.init();\n    },\n    init: function () {\n        this.fetUseriInfoHandle();\n    },\n    fetUseriInfoHandle: function () {\n        var _this = this;\n        fetchUserCenter().then(function (_a) {\n            var userInfo = _a.userInfo, countsData = _a.countsData, orderInfo = _a.orderTagInfos, customerServiceInfo = _a.customerServiceInfo;\n            // eslint-disable-next-line no-unused-expressions\n            menuData === null || menuData === void 0 ? void 0 : menuData[0].forEach(function (v) {\n                countsData.forEach(function (counts) {\n                    if (counts.type === v.type) {\n                        // eslint-disable-next-line no-param-reassign\n                        v.tit = counts.num;\n                    }\n                });\n            });\n            var info = orderTagInfos.map(function (v, index) { return (__assign(__assign({}, v), orderInfo[index])); });\n            _this.setData({\n                userInfo: userInfo,\n                menuData: menuData,\n                orderTagInfos: info,\n                customerServiceInfo: customerServiceInfo,\n                currAuthStep: 2,\n            });\n            wx.stopPullDownRefresh();\n        });\n    },\n    onClickCell: function (_a) {\n        var currentTarget = _a.currentTarget;\n        var type = currentTarget.dataset.type;\n        switch (type) {\n            case 'address': {\n                wx.navigateTo({ url: '/pages/usercenter/address/list/index' });\n                break;\n            }\n            case 'service': {\n                this.openMakePhone();\n                break;\n            }\n            case 'help-center': {\n                // Toast({\n                //   context: this,\n                //   selector: '#t-toast',\n                //   message: '‰Ω†ÁÇπÂáª‰∫ÜÂ∏ÆÂä©‰∏≠ÂøÉ',\n                //   icon: '',\n                //   duration: 1000,\n                // });\n                wx.navigateTo({ url: '/pages/usercenter/login/account/index' });\n                break;\n            }\n            case 'point': {\n                // Toast({\n                //   context: this,\n                //   selector: '#t-toast',\n                //   message: '‰Ω†ÁÇπÂáª‰∫ÜÁßØÂàÜËèúÂçï',\n                //   icon: '',\n                //   duration: 1000,\n                // });\n                var _b = getLocalAccountSession(), openid = _b.openid, unionid = _b.unionid, _c = _b.loginResponse, flag = _c.flag, token = _c.token, uid = _c.uid;\n                if (flag === true) {\n                    logoutService({ openid: openid, unionid: unionid, token: token }).then(function (e) {\n                        if (e) {\n                            wx.navigateTo({\n                                url: '/pages/usercenter/login/account/index',\n                            });\n                        }\n                    });\n                }\n                else {\n                    wx.showToast({\n                        title: 'ÊÇ®Â∑≤ÁôªÂá∫',\n                    });\n                    wx.navigateTo({\n                        url: '/pages/usercenter/login/account/index',\n                    });\n                }\n                break;\n            }\n            case 'coupon': {\n                wx.navigateTo({ url: '/pages/coupon/coupon-list/index' });\n                break;\n            }\n            default: {\n                Toast({\n                    context: this,\n                    selector: '#t-toast',\n                    message: 'Êú™Áü•Ë∑≥ËΩ¨',\n                    icon: '',\n                    duration: 1000,\n                });\n                break;\n            }\n        }\n    },\n    jumpNav: function (e) {\n        var status = e.detail.tabType;\n        if (status === 0) {\n            wx.navigateTo({ url: '/pages/order/after-service-list/index' });\n        }\n        else {\n            wx.navigateTo({ url: \"/pages/order/order-list/index?status=\" + status });\n        }\n    },\n    jumpAllOrder: function () {\n        wx.navigateTo({ url: '/pages/order/order-list/index' });\n    },\n    openMakePhone: function () {\n        this.setData({ showMakePhone: true });\n    },\n    closeMakePhone: function () {\n        this.setData({ showMakePhone: false });\n    },\n    call: function () {\n        wx.makePhoneCall({\n            phoneNumber: this.data.customerServiceInfo.servicePhone,\n        });\n    },\n    gotoUserEditPage: function () {\n        var currAuthStep = this.data.currAuthStep;\n        if (currAuthStep === 2) {\n            wx.navigateTo({ url: '/pages/usercenter/person-info/index' });\n        }\n        else {\n            this.fetUseriInfoHandle();\n        }\n    },\n    getVersionInfo: function () {\n        var versionInfo = wx.getAccountInfoSync();\n        var _a = versionInfo.miniProgram, version = _a.version, _b = _a.envVersion, envVersion = _b === void 0 ? __wxConfig : _b;\n        this.setData({\n            versionNo: envVersion === 'release' ? version : envVersion,\n        });\n    },\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fetchUserCenter = void 0;\nvar index_1 = require(\"../../config/index\");\n/** Ëé∑Âèñ‰∏™‰∫∫‰∏≠ÂøÉ‰ø°ÊÅØ */\nfunction mockFetchUserCenter() {\n    var delay = require('../_utils/delay').delay;\n    var genUsercenter = require('../../model/usercenter/usercenter').genUsercenter;\n    return delay(200).then(function () { return genUsercenter(); });\n}\n/** Ëé∑Âèñ‰∏™‰∫∫‰∏≠ÂøÉ‰ø°ÊÅØ */\nfunction fetchUserCenter() {\n    if (index_1.config.useMock) {\n        return mockFetchUserCenter();\n    }\n    return new Promise(function (resolve) {\n        resolve('real api');\n    });\n}\nexports.fetchUserCenter = fetchUserCenter;\n"],"names":[],"sourceRoot":""}